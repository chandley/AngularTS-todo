var ToDos;!function(o){var t=["ui.router","todos.root","todos.main"];o.appModule=angular.module("todos",t),o.appModule.config(["$stateProvider","$urlRouterProvider",function(o,t){o.state({name:"root",url:"/",templateUrl:"root/root.html",controller:"RootController",controllerAs:"rootCtrl"}),t.otherwise("/")}])}(ToDos||(ToDos={}));var ToDos;!function(o){o.rootModule=angular.module("todos.root",[])}(ToDos||(ToDos={}));var ToDos;!function(o){var t=function(){function o(){this.messages=["Welcome","New version is out"],this.showMessages=!0}return o.prototype.toggleMessages=function(){this.showMessages=!this.showMessages},o}();o.rootModule.controller("RootController",t)}(ToDos||(ToDos={}));var ToDos;!function(o){var t=["ui.router","ui.bootstrap"];o.todosModule=angular.module("todos.main",t),o.todosModule.config(["$stateProvider",function(o){o.state({name:"root.todos",url:"todos",templateUrl:"/todos/list.html",controller:"ListController",controllerAs:"listCtrl"})}])}(ToDos||(ToDos={}));var ToDos;!function(o){var t=function(){function o(o,t){this.todoService=o,this.$modalInstance=t}return o.$inject=["todoService","$modalInstance"],o.prototype.save=function(){var o=this,t={id:Date.now().toString(),text:this.text,created:moment().toISOString()};this.todoService.add(t).then(function(){o.$modalInstance.close()})},o}();o.todosModule.controller("AddNewController",t)}(ToDos||(ToDos={}));var ToDos;!function(o){var t=function(){function o(o,t,e){this.todoService=o,this.$window=t,this.$modal=e,this.load()}return o.$inject=["todoService","$window","$modal"],o.prototype.load=function(){var o=this;this.todoService.list().then(function(t){o.todos=t})["catch"](function(t){o.$window.console.log(t)})},o.prototype.addNew=function(){var o=this;this.$modal.open({controller:"AddNewController",controllerAs:"addNewCtrl",templateUrl:"/todos/addnew.html",backdrop:"static"}).result.then(function(){o.load()})},o}();o.todosModule.controller("ListController",t)}(ToDos||(ToDos={}));var ToDos;!function(o){var t=function(){function o(o){this.$http=o}return o.$inject=["$http"],o.prototype.list=function(){return this.$http.get("/api/todos").then(function(o){return o.data})},o.prototype.add=function(o){return this.$http.post("/api/todos",o).then(function(o){return o.data})},o}();o.ToDoService=t,o.todosModule.service("todoService",t)}(ToDos||(ToDos={}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC50cyIsInJvb3QvbW9kdWxlLnRzIiwicm9vdC9Sb290Q29udHJvbGxlci50cyIsInRvZG9zL21vZHVsZS50cyIsInRvZG9zL0FkZE5ld0NvbnRyb2xsZXIudHMiLCJhcHAuanMiLCJ0b2Rvcy9MaXN0Q29udHJvbGxlci50cyIsInRvZG9zL1RvRG9TZXJ2aWNlLnRzIl0sIm5hbWVzIjpbIlRvRG9zIiwiVG9Eb3MuUm9vdENvbnRyb2xsZXIiLCJUb0Rvcy5Sb290Q29udHJvbGxlci5jb25zdHJ1Y3RvciIsIlRvRG9zLlJvb3RDb250cm9sbGVyLnRvZ2dsZU1lc3NhZ2VzIiwiVG9Eb3MuQWRkTmV3Q29udHJvbGxlciIsIlRvRG9zLkFkZE5ld0NvbnRyb2xsZXIuY29uc3RydWN0b3IiLCJBZGROZXdDb250cm9sbGVyIiwiJGluamVjdCIsIlRvRG9zLkFkZE5ld0NvbnRyb2xsZXIuc2F2ZSIsIlRvRG9zLkxpc3RDb250cm9sbGVyIiwiVG9Eb3MuTGlzdENvbnRyb2xsZXIuY29uc3RydWN0b3IiLCJMaXN0Q29udHJvbGxlciIsIlRvRG9zLkxpc3RDb250cm9sbGVyLmxvYWQiLCJUb0Rvcy5MaXN0Q29udHJvbGxlci5hZGROZXciLCJUb0Rvcy5Ub0RvU2VydmljZSIsIlRvRG9zLlRvRG9TZXJ2aWNlLmNvbnN0cnVjdG9yIiwiVG9Eb1NlcnZpY2UiLCJUb0Rvcy5Ub0RvU2VydmljZS5saXN0IiwiVG9Eb3MuVG9Eb1NlcnZpY2UuYWRkIl0sIm1hcHBpbmdzIjoiQUFJQSxHQUFVQSxRQUFWLFNBQVVBLEdBSU5BLEdBQUlBLElBQ0FBLFlBQ0FBLGFBQ0FBLGFBRU9BLEdBQUFBLFVBQVlBLFFBQVFBLE9BQU9BLFFBQVNBLEdBRS9DQSxFQUFBQSxVQUFVQSxRQUFBQSxpQkFBQUEscUJBQ05BLFNBQUNBLEVBQ0RBLEdBRUFBLEVBQ0tBLE9BQ0dBLEtBQU1BLE9BQ05BLElBQUtBLElBQ0xBLFlBQWFBLGlCQUNiQSxXQUFZQSxpQkFDWkEsYUFBY0EsYUFHbEJBLEVBQW1C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YSBvbiAwMy8wOS8xNS5cbiAqL1xuXG5uYW1lc3BhY2UgVG9Eb3Mge1xuXG4gICAgZXhwb3J0IHR5cGUgTW9kYWxTZXJ2aWNlID0gYW5ndWxhci51aS5ib290c3RyYXAuSU1vZGFsU2VydmljZTtcblxuICAgIHZhciBkZXBzID0gW1xuICAgICAgICBcInVpLnJvdXRlclwiLFxuICAgICAgICBcInRvZG9zLnJvb3RcIixcbiAgICAgICAgXCJ0b2Rvcy5tYWluXCJcbiAgICBdXG4gICAgZXhwb3J0IHZhciBhcHBNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShcInRvZG9zXCIsIGRlcHMpO1xuXG4gICAgYXBwTW9kdWxlLmNvbmZpZyhcbiAgICAgICAgKCRzdGF0ZVByb3ZpZGVyOiBhbmd1bGFyLnVpLklTdGF0ZVByb3ZpZGVyLFxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXI6IGFuZ3VsYXIudWkuSVVybFJvdXRlclByb3ZpZGVyKSA9PiB7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJyb290XCIsXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9cIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJyb290L3Jvb3QuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiUm9vdENvbnRyb2xsZXJcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6IFwicm9vdEN0cmxcIlxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG5cbiAgICB9KVxuXG59XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgY2hyaXNoYSBvbiAwMy8wOS8xNS5cbiAqL1xuXG5uYW1lc3BhY2UgVG9Eb3Mge1xuXG4gICAgZXhwb3J0IHZhciByb290TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoXCJ0b2Rvcy5yb290XCIsIFtdKTtcblxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBjaHJpc2hhIG9uIDAzLzA5LzE1LlxuICovXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJtb2R1bGUudHNcIiAvPlxubmFtZXNwYWNlIFRvRG9zIHtcblxuICAgIGNsYXNzIFJvb3RDb250cm9sbGVyIHtcbiAgICAgICAgcHVibGljIG1lc3NhZ2VzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgIFwiV2VsY29tZVwiLFxuICAgICAgICAgICAgXCJOZXcgdmVyc2lvbiBpcyBvdXRcIlxuICAgICAgICBdO1xuXG4gICAgICAgIHB1YmxpYyBzaG93TWVzc2FnZXMgPSB0cnVlO1xuICAgICAgICBwdWJsaWMgdG9nZ2xlTWVzc2FnZXMoKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlcyA9ICF0aGlzLnNob3dNZXNzYWdlcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJvb3RNb2R1bGUuY29udHJvbGxlcihcIlJvb3RDb250cm9sbGVyXCIsIFJvb3RDb250cm9sbGVyKVxufVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGNocmlzaGEgb24gMDMvMDkvMTUuXG4gKi9cblxubmFtZXNwYWNlIFRvRG9zIHtcblxuICAgIHZhciBkZXBzID0gW1xuICAgICAgICBcInVpLnJvdXRlclwiLFxuICAgICAgICBcInVpLmJvb3RzdHJhcFwiXG4gICAgXVxuXG4gICAgZXhwb3J0IHZhciB0b2Rvc01vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKFwidG9kb3MubWFpblwiLCBkZXBzKTtcblxuICAgIHRvZG9zTW9kdWxlLmNvbmZpZygoJHN0YXRlUHJvdmlkZXI6IGFuZ3VsYXIudWkuSVN0YXRlUHJvdmlkZXIpID0+IHtcblxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBcInJvb3QudG9kb3NcIixcbiAgICAgICAgICAgIHVybDogXCJ0b2Rvc1wiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiL3RvZG9zL2xpc3QuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlcjogXCJMaXN0Q29udHJvbGxlclwiLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcImxpc3RDdHJsXCJcbiAgICAgICAgfSk7XG4gICAgfSlcblxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIm1vZHVsZS50c1wiIC8+XG5uYW1lc3BhY2UgVG9Eb3Mge1xuICAgIGNsYXNzIEFkZE5ld0NvbnRyb2xsZXIge1xuICAgICAgICBwdWJsaWMgdGV4dDogc3RyaW5nO1xuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRvZG9TZXJ2aWNlOiBUb0RvU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZSAkbW9kYWxJbnN0YW5jZTogYW5ndWxhci51aS5ib290c3RyYXAuSU1vZGFsU2VydmljZUluc3RhbmNlKSB7XG4gICAgICAgIH1cbiAgICAgICAgcHVibGljIHNhdmUoKSB7XG4gICAgICAgICAgICB2YXIgdG9kbyA9IHtcbiAgICAgICAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiBtb21lbnQoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50b2RvU2VydmljZS5hZGQodG9kbylcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2Rvc01vZHVsZS5jb250cm9sbGVyKFwiQWRkTmV3Q29udHJvbGxlclwiLCBBZGROZXdDb250cm9sbGVyKTtcbn1cbiIsIi8qKlxuICogQ3JlYXRlZCBieSBjaHJpc2hhIG9uIDAzLzA5LzE1LlxuICovXG52YXIgVG9Eb3M7XG4oZnVuY3Rpb24gKFRvRG9zKSB7XG4gICAgdmFyIGRlcHMgPSBbXG4gICAgICAgIFwidWkucm91dGVyXCIsXG4gICAgICAgIFwidG9kb3Mucm9vdFwiLFxuICAgICAgICBcInRvZG9zLm1haW5cIlxuICAgIF07XG4gICAgVG9Eb3MuYXBwTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoXCJ0b2Rvc1wiLCBkZXBzKTtcbiAgICBUb0Rvcy5hcHBNb2R1bGUuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoe1xuICAgICAgICAgICAgbmFtZTogXCJyb290XCIsXG4gICAgICAgICAgICB1cmw6IFwiL1wiLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicm9vdC9yb290Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiUm9vdENvbnRyb2xsZXJcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJyb290Q3RybFwiXG4gICAgICAgIH0pO1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbiAgICB9KTtcbn0pKFRvRG9zIHx8IChUb0RvcyA9IHt9KSk7XG5cbi8qKlxuICogQ3JlYXRlZCBieSBjaHJpc2hhIG9uIDAzLzA5LzE1LlxuICovXG52YXIgVG9Eb3M7XG4oZnVuY3Rpb24gKFRvRG9zKSB7XG4gICAgVG9Eb3Mucm9vdE1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKFwidG9kb3Mucm9vdFwiLCBbXSk7XG59KShUb0RvcyB8fCAoVG9Eb3MgPSB7fSkpO1xuXG4vKipcbiAqIENyZWF0ZWQgYnkgY2hyaXNoYSBvbiAwMy8wOS8xNS5cbiAqL1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIm1vZHVsZS50c1wiIC8+XG52YXIgVG9Eb3M7XG4oZnVuY3Rpb24gKFRvRG9zKSB7XG4gICAgdmFyIFJvb3RDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm9vdENvbnRyb2xsZXIoKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW1xuICAgICAgICAgICAgICAgIFwiV2VsY29tZVwiLFxuICAgICAgICAgICAgICAgIFwiTmV3IHZlcnNpb24gaXMgb3V0XCJcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgUm9vdENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZU1lc3NhZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zaG93TWVzc2FnZXMgPSAhdGhpcy5zaG93TWVzc2FnZXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb290Q29udHJvbGxlcjtcbiAgICB9KSgpO1xuICAgIFRvRG9zLnJvb3RNb2R1bGUuY29udHJvbGxlcihcIlJvb3RDb250cm9sbGVyXCIsIFJvb3RDb250cm9sbGVyKTtcbn0pKFRvRG9zIHx8IChUb0RvcyA9IHt9KSk7XG5cbi8qKlxuICogQ3JlYXRlZCBieSBjaHJpc2hhIG9uIDAzLzA5LzE1LlxuICovXG52YXIgVG9Eb3M7XG4oZnVuY3Rpb24gKFRvRG9zKSB7XG4gICAgdmFyIGRlcHMgPSBbXG4gICAgICAgIFwidWkucm91dGVyXCIsXG4gICAgICAgIFwidWkuYm9vdHN0cmFwXCJcbiAgICBdO1xuICAgIFRvRG9zLnRvZG9zTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoXCJ0b2Rvcy5tYWluXCIsIGRlcHMpO1xuICAgIFRvRG9zLnRvZG9zTW9kdWxlLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoe1xuICAgICAgICAgICAgbmFtZTogXCJyb290LnRvZG9zXCIsXG4gICAgICAgICAgICB1cmw6IFwidG9kb3NcIixcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi90b2Rvcy9saXN0Lmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiTGlzdENvbnRyb2xsZXJcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJsaXN0Q3RybFwiXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoVG9Eb3MgfHwgKFRvRG9zID0ge30pKTtcblxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIm1vZHVsZS50c1wiIC8+XG52YXIgVG9Eb3M7XG4oZnVuY3Rpb24gKFRvRG9zKSB7XG4gICAgdmFyIEFkZE5ld0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBZGROZXdDb250cm9sbGVyKHRvZG9TZXJ2aWNlLCAkbW9kYWxJbnN0YW5jZSkge1xuICAgICAgICAgICAgdGhpcy50b2RvU2VydmljZSA9IHRvZG9TZXJ2aWNlO1xuICAgICAgICAgICAgdGhpcy4kbW9kYWxJbnN0YW5jZSA9ICRtb2RhbEluc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIEFkZE5ld0NvbnRyb2xsZXIucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRvZG8gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHQsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogbW9tZW50KCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudG9kb1NlcnZpY2UuYWRkKHRvZG8pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLiRtb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFkZE5ld0NvbnRyb2xsZXI7XG4gICAgfSkoKTtcbiAgICBUb0Rvcy50b2Rvc01vZHVsZS5jb250cm9sbGVyKFwiQWRkTmV3Q29udHJvbGxlclwiLCBBZGROZXdDb250cm9sbGVyKTtcbn0pKFRvRG9zIHx8IChUb0RvcyA9IHt9KSk7XG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJtb2R1bGUudHNcIiAvPlxudmFyIFRvRG9zO1xuKGZ1bmN0aW9uIChUb0Rvcykge1xuICAgIHZhciBMaXN0Q29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIExpc3RDb250cm9sbGVyKHRvZG9TZXJ2aWNlLCAkd2luZG93LCAkbW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMudG9kb1NlcnZpY2UgPSB0b2RvU2VydmljZTtcbiAgICAgICAgICAgIHRoaXMuJHdpbmRvdyA9ICR3aW5kb3c7XG4gICAgICAgICAgICB0aGlzLiRtb2RhbCA9ICRtb2RhbDtcbiAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIExpc3RDb250cm9sbGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudG9kb1NlcnZpY2UubGlzdCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRvZG9zKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudG9kb3MgPSB0b2RvcztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLiR3aW5kb3cuY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIExpc3RDb250cm9sbGVyLnByb3RvdHlwZS5hZGROZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy4kbW9kYWwub3Blbih7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJBZGROZXdDb250cm9sbGVyXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiBcImFkZE5ld0N0cmxcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIvdG9kb3MvYWRkbmV3Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBiYWNrZHJvcDogXCJzdGF0aWNcIiAvLyBwcmV2ZW50cyBjbGlja2F3YXkgZnJvbSBjbG9zaW5nXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubG9hZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMaXN0Q29udHJvbGxlcjtcbiAgICB9KSgpO1xuICAgIFRvRG9zLnRvZG9zTW9kdWxlLmNvbnRyb2xsZXIoXCJMaXN0Q29udHJvbGxlclwiLCBMaXN0Q29udHJvbGxlcik7XG59KShUb0RvcyB8fCAoVG9Eb3MgPSB7fSkpO1xuXG4vLy9yZWZlcmVuY2UgcGF0aD1cIm1vZHVsZS50c1wiIC8+XG52YXIgVG9Eb3M7XG4oZnVuY3Rpb24gKFRvRG9zKSB7XG4gICAgdmFyIFRvRG9TZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVG9Eb1NlcnZpY2UoJGh0dHApIHtcbiAgICAgICAgICAgIHRoaXMuJGh0dHAgPSAkaHR0cDtcbiAgICAgICAgfVxuICAgICAgICBUb0RvU2VydmljZS5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRodHRwLmdldChcIi9hcGkvdG9kb3NcIikuXG4gICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUb0RvU2VydmljZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRvZG8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRodHRwLnBvc3QoXCIvYXBpL3RvZG9zXCIsIHRvZG8pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7IHJldHVybiByZXNwb25zZS5kYXRhOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvRG9TZXJ2aWNlO1xuICAgIH0pKCk7XG4gICAgVG9Eb3MuVG9Eb1NlcnZpY2UgPSBUb0RvU2VydmljZTtcbiAgICBUb0Rvcy50b2Rvc01vZHVsZS5zZXJ2aWNlKFwidG9kb1NlcnZpY2VcIiwgVG9Eb1NlcnZpY2UpO1xufSkoVG9Eb3MgfHwgKFRvRG9zID0ge30pKTtcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJtb2R1bGUudHNcIiAvPlxuXG5uYW1lc3BhY2UgVG9Eb3Mge1xuXG4gICAgaW50ZXJmYWNlIFRvRG8ge1xuICAgICAgICBpZDogc3RyaW5nO1xuICAgICAgICB0ZXh0OiBzdHJpbmc7XG4gICAgICAgIHRhZ3M6IHN0cmluZ1tdOyAvLyBhY3R1YWxsIGRhdGVzXG4gICAgICAgIGR1ZTogc3RyaW5nOyAvLyBhY3R1YWxsIGRhdGVcbiAgICAgICAgZG9uZTogc3RyaW5nOyAvLyBhY3R1YWxsIGRhdGVcblxuICAgIH1cblxuICAgIGNsYXNzIExpc3RDb250cm9sbGVyIHtcbiAgICAgICAgcHVibGljIHRvZG9zOlRvRG9bXTtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRvZG9TZXJ2aWNlOlRvRG9TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBwcml2YXRlICR3aW5kb3c6YW5ndWxhci5JV2luZG93U2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZSAkbW9kYWw6TW9kYWxTZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWQoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgcHJpdmF0ZVxuICAgICAgICAgICAgbG9hZCgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2RvU2VydmljZS5saXN0KClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHRvZG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZG9zID0gdG9kb3M7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHdpbmRvdy5jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICBwdWJsaWMgYWRkTmV3KCkge1xuICAgICAgICAgICAgdGhpcy4kbW9kYWwub3Blbih7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJBZGROZXdDb250cm9sbGVyXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiBcImFkZE5ld0N0cmxcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIvdG9kb3MvYWRkbmV3Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBiYWNrZHJvcDogXCJzdGF0aWNcIiAvLyBwcmV2ZW50cyBjbGlja2F3YXkgZnJvbSBjbG9zaW5nXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuXG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvZG9zTW9kdWxlLmNvbnRyb2xsZXIoXCJMaXN0Q29udHJvbGxlclwiLCBMaXN0Q29udHJvbGxlcik7XG5cblxuXG59IiwiLy8vcmVmZXJlbmNlIHBhdGg9XCJtb2R1bGUudHNcIiAvPlxuXG5uYW1lc3BhY2UgVG9Eb3Mge1xuXG4gICAgZXhwb3J0IGNsYXNzIFRvRG9TZXJ2aWNlIHtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRodHRwOiBhbmd1bGFyLklIdHRwU2VydmljZSkge1xuXG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgbGlzdCgpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0PFRvRG9bXT4oXCIvYXBpL3RvZG9zXCIpLlxuICAgICAgICAgICAgICAgIHRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICAgICAgcHVibGljIGFkZCh0b2RvOiBUb0RvKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaHR0cC5wb3N0KFwiL2FwaS90b2Rvc1wiLCB0b2RvKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5kYXRhKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9kb3NNb2R1bGUuc2VydmljZShcInRvZG9TZXJ2aWNlXCIsIFRvRG9TZXJ2aWNlKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==